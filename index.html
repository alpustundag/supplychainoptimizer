<!DOCTYPE html>
<html lang="en">
<head>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-XRV0JVTY6Q"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XRV0JVTY6Q');
</script>
    <meta charset="UTF-8">
    <title>Supply Chain Inventory Simulator - AI Optimized</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-main: #050814;
            --bg-secondary: #0a0f1e;
            --bg-card: rgba(15, 23, 42, 0.6);
            --bg-card-hover: rgba(15, 23, 42, 0.8);
            
            --accent: #00d4ff;
            --accent-secondary: #00ffc8;
            --accent-red: #ff4d4d;
            --accent-orange: #ffae00;
            --accent-purple: #b026ff;
            --accent-pink: #ff26b9;
            --accent-ai: #26ff89;
            
            --text-main: #ffffff;
            --text-secondary: #94a3b8;
            --text-dim: #64748b;
            
            --border-soft: rgba(100, 116, 139, 0.2);
            --border-glow: rgba(0, 212, 255, 0.3);
            --border-ai: rgba(38, 255, 137, 0.3);
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 40px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.3);
            --shadow-glow: 0 0 40px rgba(0, 212, 255, 0.1);
            --shadow-ai: 0 0 40px rgba(38, 255, 137, 0.2);
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }

        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: var(--bg-main);
            color: var(--text-main);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(176, 38, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(0, 255, 200, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 60% 60%, rgba(38, 255, 137, 0.05) 0%, transparent 50%),
                linear-gradient(180deg, var(--bg-main) 0%, var(--bg-secondary) 100%);
            z-index: -2;
        }

        /* Animated Grid Background */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1;
            animation: grid-move 20s linear infinite;
        }

        @keyframes grid-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Home Button Style - Adapted for Simulator Theme */
        .home-button {
            position: fixed;
            top: 24px;
            left: 24px;
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(12px);
            box-shadow: var(--shadow-md);
        }

        .home-button:hover {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-secondary) 100%);
            color: var(--bg-main);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 0 24px rgba(0, 212, 255, 0.5);
        }

        .home-button svg {
            width: 22px;
            height: 22px;
            stroke-width: 2.5;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        header { 
            text-align: center; 
            margin-bottom: 40px;
            padding: 30px 0;
            position: relative;
        }

        h1 { 
            font-weight: 800; 
            font-size: clamp(1.8rem, 4vw, 3rem);
            background: linear-gradient(135deg, var(--text-main), var(--accent), var(--accent-secondary));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            letter-spacing: -0.02em;
            animation: glow-text 3s ease-in-out infinite alternate;
        }

        @keyframes glow-text {
            from { filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.5)); }
            to { filter: drop-shadow(0 0 30px rgba(0, 255, 200, 0.5)); }
        }

        .subtitle { 
            color: var(--text-secondary); 
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        /* Status Badge */
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 20px;
            padding: 6px 16px;
            margin-top: 15px;
            font-size: 0.85rem;
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0%, 100% { border-color: rgba(0, 212, 255, 0.3); }
            50% { border-color: rgba(0, 212, 255, 0.6); }
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: var(--accent-secondary);
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Dashboard */
        .dashboard {
            display: grid;
            grid-template-columns: 360px 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        /* Glass Card Effect */
        .card {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--border-soft);
            border-radius: 20px;
            padding: 24px;
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--accent), 
                transparent
            );
            opacity: 0;
            transition: opacity 0.3s;
        }

        .card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow), var(--shadow-lg);
        }

        .card:hover::before {
            opacity: 1;
        }

        /* AI Optimization Card */
        .ai-card {
            background: linear-gradient(135deg, rgba(38, 255, 137, 0.05), rgba(38, 255, 137, 0.02));
            border: 1px solid var(--border-ai);
            margin-bottom: 24px;
        }

        .ai-card::before {
            background: linear-gradient(90deg, 
                transparent, 
                var(--accent-ai), 
                transparent
            );
        }

        .ai-card:hover {
            box-shadow: var(--shadow-ai), var(--shadow-lg);
        }

        /* Section Headers */
        .section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-soft);
            position: relative;
        }

        .section-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, var(--accent), transparent);
        }

        .section-header.ai-header::after {
            background: linear-gradient(90deg, var(--accent-ai), transparent);
        }

        .section-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border-radius: 10px;
            font-size: 16px;
        }

        .section-icon.ai-icon {
            background: linear-gradient(135deg, var(--accent-ai), var(--accent-secondary));
            animation: ai-pulse 2s infinite;
        }

        @keyframes ai-pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.9; }
        }

        .section-title {
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-main);
        }

        /* AI Optimization Display */
        .ai-optimization {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .ai-metric {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid var(--border-soft);
            position: relative;
            overflow: hidden;
        }

        .ai-metric.optimal {
            border-color: var(--border-ai);
            background: rgba(38, 255, 137, 0.05);
        }

        .ai-metric-label {
            font-size: 0.75rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 8px;
        }

        .ai-metric-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-ai);
            margin-bottom: 4px;
        }

        .ai-metric-current {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .ai-metric-diff {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 6px;
            margin-left: 8px;
        }

        .ai-metric-diff.positive {
            background: rgba(38, 255, 137, 0.2);
            color: var(--accent-ai);
        }

        .ai-metric-diff.negative {
            background: rgba(255, 77, 77, 0.2);
            color: var(--accent-red);
        }

        /* AI Status */
        .ai-status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: rgba(38, 255, 137, 0.05);
            border-radius: 10px;
            margin-bottom: 16px;
            border: 1px solid rgba(38, 255, 137, 0.2);
        }

        .ai-status-text {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--accent-ai);
        }

        .ai-status-indicator {
            width: 8px;
            height: 8px;
            background: var(--accent-ai);
            border-radius: 50%;
            animation: ai-blink 2s infinite;
        }

        @keyframes ai-blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Control Groups */
        .control-group {
            margin-bottom: 24px;
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .control-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--text-main);
            background: rgba(0, 212, 255, 0.1);
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.875rem;
        }

        /* Custom Slider */
        .slider-container {
            position: relative;
            height: 40px;
            display: flex;
            align-items: center;
        }

        .slider-with-indicator {
            position: relative;
        }

        .optimal-indicator {
            position: absolute;
            top: -8px;
            width: 2px;
            height: 22px;
            background: var(--accent-ai);
            box-shadow: 0 0 10px var(--accent-ai);
            z-index: 1;
            pointer-events: none;
        }

        .optimal-indicator::before {
            content: 'AI';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.6rem;
            font-weight: 700;
            color: var(--accent-ai);
            background: var(--bg-main);
            padding: 2px 4px;
            border-radius: 4px;
            white-space: nowrap;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: rgba(100, 116, 139, 0.2);
            border-radius: 3px;
            outline: none;
            transition: all 0.3s;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border: 2px solid var(--bg-main);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0, 212, 255, 0.3);
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border: 2px solid var(--bg-main);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 10px rgba(0, 212, 255, 0.3);
        }

        /* Speed Slider Special Color */
        input#in_speed {
            background: rgba(176, 38, 255, 0.1);
        }

        input#in_speed::-webkit-slider-thumb {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
            box-shadow: 0 2px 10px rgba(176, 38, 255, 0.3);
        }

        input#in_speed::-moz-range-thumb {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
            box-shadow: 0 2px 10px rgba(176, 38, 255, 0.3);
        }

        /* Warehouse Visual */
        .warehouse-container {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.2));
            border-radius: 16px;
            padding: 16px;
            border: 1px solid var(--border-soft);
            margin-bottom: 24px;
        }

        .warehouse-visual {
            height: 220px;
            position: relative;
            background: linear-gradient(180deg, rgba(0, 212, 255, 0.03), transparent);
            border: 2px solid var(--border-soft);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }

        .warehouse-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(100, 116, 139, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(100, 116, 139, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.5;
        }
        
        .stock-level {
            width: 100%;
            background: linear-gradient(180deg, var(--accent) 0%, var(--accent-secondary) 100%);
            transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 2;
            box-shadow: 0 -5px 20px rgba(0, 212, 255, 0.3);
        }

        .stock-level::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }
        
        .stock-level.low { 
            background: linear-gradient(180deg, var(--accent-orange), rgba(255, 174, 0, 0.6));
            box-shadow: 0 -5px 20px rgba(255, 174, 0, 0.3);
        }
        
        .stock-level.critical { 
            background: linear-gradient(180deg, var(--accent-red), rgba(255, 77, 77, 0.6));
            box-shadow: 0 -5px 20px rgba(255, 77, 77, 0.3);
            animation: critical-pulse 1s ease-in-out infinite;
        }

        @keyframes critical-pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .stock-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 10;
        }

        .rop-line {
            position: absolute;
            width: 100%;
            border-top: 2px dashed var(--accent-orange);
            z-index: 5;
            opacity: 0.8;
        }

        .rop-line::before {
            content: 'Current ROP';
            position: absolute;
            right: 10px;
            top: -20px;
            font-size: 0.7rem;
            color: var(--accent-orange);
            font-weight: 600;
            background: var(--bg-main);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .optimal-rop-line {
            position: absolute;
            width: 100%;
            border-top: 2px solid var(--accent-ai);
            z-index: 5;
            opacity: 0.9;
        }

        .optimal-rop-line::before {
            content: 'AI Optimal ROP';
            position: absolute;
            left: 10px;
            top: -20px;
            font-size: 0.7rem;
            color: var(--accent-ai);
            font-weight: 600;
            background: var(--bg-main);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .truck-icon {
            position: absolute;
            top: 20px;
            right: -60px;
            font-size: 32px;
            filter: drop-shadow(0 2px 10px rgba(0, 0, 0, 0.3));
            z-index: 20;
        }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 0.4));
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-soft);
            border-radius: 16px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .kpi-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
            opacity: 0.05;
            transition: opacity 0.3s;
        }

        .kpi-card:hover {
            transform: translateY(-4px);
            border-color: var(--border-glow);
            box-shadow: var(--shadow-glow);
        }

        .kpi-card:hover::before {
            opacity: 0.1;
        }

        .kpi-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .kpi-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 18px;
        }

        .kpi-icon.blue {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 212, 255, 0.1));
            color: var(--accent);
        }

        .kpi-icon.green {
            background: linear-gradient(135deg, rgba(0, 255, 200, 0.2), rgba(0, 255, 200, 0.1));
            color: var(--accent-secondary);
        }

        .kpi-icon.orange {
            background: linear-gradient(135deg, rgba(255, 174, 0, 0.2), rgba(255, 174, 0, 0.1));
            color: var(--accent-orange);
        }

        .kpi-icon.purple {
            background: linear-gradient(135deg, rgba(176, 38, 255, 0.2), rgba(176, 38, 255, 0.1));
            color: var(--accent-purple);
        }

        .kpi-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-dim);
            font-weight: 600;
        }

        .kpi-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            line-height: 1;
            background: linear-gradient(135deg, var(--text-main), var(--text-secondary));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Chart Container */
        .chart-container {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.1));
            border-radius: 16px;
            padding: 20px;
            border: 1px solid var(--border-soft);
            position: relative;
            overflow: hidden;
        }

        .chart-wrapper {
            height: 300px;
            position: relative;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        /* Cost Breakdown */
        .cost-breakdown {
            margin-top: 24px;
        }

        .cost-header {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .cost-bar-container {
            display: flex;
            height: 40px;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-soft);
            position: relative;
        }

        .cost-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(0, 0, 0, 0.8);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .cost-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .cost-legend {
            display: flex;
            gap: 20px;
            margin-top: 12px;
            font-size: 0.75rem;
        }

        .cost-legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        /* Action Buttons */
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn-reset {
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            color: var(--bg-main);
        }

        .btn-optimize {
            background: linear-gradient(135deg, var(--accent-ai), var(--accent-secondary));
            color: var(--bg-main);
            animation: ai-glow 3s ease-in-out infinite;
        }

        @keyframes ai-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(38, 255, 137, 0.2); }
            50% { box-shadow: 0 0 30px rgba(38, 255, 137, 0.4); }
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-card);
            color: var(--text-main);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            border: 1px solid var(--border-soft);
            box-shadow: var(--shadow-md);
            backdrop-filter: blur(10px);
            margin-bottom: 8px;
            z-index: 100;
        }

        .tooltip:hover::after {
            opacity: 1;
        }

        /* Info Button Special Style */
        .info-button {
            cursor: pointer;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }

        .info-button:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .info-button:active {
            transform: scale(0.95);
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Q-Learning Section Highlight Animation */
        @keyframes highlight-glow {
            0% { 
                box-shadow: 0 0 0 0 rgba(38, 255, 137, 0);
                border-color: rgba(38, 255, 137, 0.2);
            }
            50% { 
                box-shadow: 0 0 30px 10px rgba(38, 255, 137, 0.3);
                border-color: rgba(38, 255, 137, 0.8);
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(38, 255, 137, 0);
                border-color: rgba(38, 255, 137, 0.2);
            }
        }

        .ql-explanation-section.highlight {
            animation: highlight-glow 1.5s ease-out;
        }

        /* Info Section */
        .info-section {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-soft);
            border-radius: 20px;
            padding: 32px;
            margin-top: 40px;
            position: relative;
            overflow: hidden;
        }

        .info-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent,
                var(--accent),
                var(--accent-secondary),
                var(--accent-ai),
                transparent
            );
            animation: slide-gradient 3s ease-in-out infinite;
        }

        @keyframes slide-gradient {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .info-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .info-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
            border-radius: 12px;
            font-size: 20px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .info-card {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-soft);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s;
        }

        .info-card:hover {
            background: rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
            border-color: var(--border-glow);
        }

        .info-card-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 12px;
        }

        .info-card-content {
            font-size: 0.85rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .formula {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 212, 255, 0.05);
            padding: 8px 12px;
            border-radius: 6px;
            margin: 8px 0;
            font-size: 0.8rem;
            color: var(--accent-secondary);
            border-left: 2px solid var(--accent);
        }

        .highlight {
            color: var(--accent);
            font-weight: 600;
        }

        .ai-highlight {
            color: var(--accent-ai);
            font-weight: 600;
        }

        /* Units styling */
        .unit-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            font-weight: 400;
            margin-left: 4px;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            .kpi-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .button-group {
                grid-template-columns: 1fr;
            }
            
            .home-button {
                top: 16px;
                left: 16px;
                width: 42px;
                height: 42px;
            }

            .home-button svg {
                width: 18px;
                height: 18px;
            }
        }
    </style>
</head>
<body>

    <a href="https://alpustundag.github.io/" class="home-button" aria-label="Home">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
    </a>

    <div class="container">
        <header>
            <h1>AI-Powered Supply Chain Optimizer</h1>
            <p class="subtitle">Reinforcement Learning for Real-time Inventory Optimization</p>
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>Simulation Active</span>
            </div>
        </header>

        <div class="dashboard">
            
            <div class="card">
                
                <div class="card ai-card">
                    <div class="section-header ai-header">
                        <div class="section-icon ai-icon">
                            ü§ñ
                        </div>
                        <h3 class="section-title">AI Optimization Engine</h3>
                    </div>
                    
                    <div class="ai-status">
                        <div class="ai-status-text">
                            <span class="ai-status-indicator"></span>
                            <span>RL Agent Active - Q-Learning</span>
                        </div>
                        <span class="tooltip info-button" data-tooltip="Learn about Q-Learning" onclick="scrollToQLearning()">‚ÑπÔ∏è</span>
                    </div>
                    
                    <div class="ai-optimization">
                        <div class="ai-metric optimal">
                            <div class="ai-metric-label">Optimal Order Qty</div>
                            <div class="ai-metric-value" id="optimal_Q">245</div>
                            <div class="ai-metric-current">
                                Current: <span id="current_Q_display">200</span>
                                <span id="diff_Q" class="ai-metric-diff negative">-45</span>
                            </div>
                        </div>
                        
                        <div class="ai-metric optimal">
                            <div class="ai-metric-label">Optimal Reorder Pt</div>
                            <div class="ai-metric-value" id="optimal_s">165</div>
                            <div class="ai-metric-current">
                                Current: <span id="current_s_display">100</span>
                                <span id="diff_s" class="ai-metric-diff negative">-65</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button id="btn_reset" class="btn btn-reset">Reset Sim</button>
                        <button id="btn_optimize" class="btn btn-optimize">Apply AI</button>
                    </div>
                </div>
                
                <div class="section-header">
                    <div class="section-icon" style="background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));">
                        üöÄ
                    </div>
                    <h3 class="section-title">Simulation Control</h3>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span>Speed</span>
                        <span id="lbl_speed" class="control-value" style="background: rgba(176, 38, 255, 0.1); color: var(--accent-purple);">Normal</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="in_speed" min="1" max="100" value="50">
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-icon">
                        üìä
                    </div>
                    <h3 class="section-title">Demand Parameters</h3>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span class="tooltip" data-tooltip="Average daily demand">Mean Demand (Œº)<span class="unit-label">units/day</span></span>
                        <span id="lbl_muD" class="control-value">50</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="in_muD" min="10" max="100" value="50">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span class="tooltip" data-tooltip="Demand volatility">Std Dev (œÉ)<span class="unit-label">units</span></span>
                        <span id="lbl_sigD" class="control-value">10</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="in_sigD" min="1" max="30" value="10">
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-icon">
                        üì¶
                    </div>
                    <h3 class="section-title">Inventory Policy</h3>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span class="tooltip" data-tooltip="Order quantity per batch">Order Quantity (Q)<span class="unit-label">units</span></span>
                        <span id="lbl_Q" class="control-value">200</span>
                    </div>
                    <div class="slider-container slider-with-indicator">
                        <div id="optimal_Q_indicator" class="optimal-indicator" style="left: 49%;"></div>
                        <input type="range" id="in_Q" min="50" max="500" value="200">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span class="tooltip" data-tooltip="Trigger point for new orders">Reorder Point (s)<span class="unit-label">units</span></span>
                        <span id="lbl_s" class="control-value">100</span>
                    </div>
                    <div class="slider-container slider-with-indicator">
                        <div id="optimal_s_indicator" class="optimal-indicator" style="left: 82.5%;"></div>
                        <input type="range" id="in_s" min="10" max="200" value="100">
                    </div>
                </div>

                <div class="section-header">
                    <div class="section-icon">
                        ‚è±Ô∏è
                    </div>
                    <h3 class="section-title">Lead Time</h3>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span class="tooltip" data-tooltip="Average delivery time">Mean Lead Time (Œº)<span class="unit-label">days</span></span>
                        <span id="lbl_muL" class="control-value">3</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="in_muL" min="1" max="10" value="3">
                    </div>
                </div>
                
                <div class="control-group">
                    <div class="control-label">
                        <span class="tooltip" data-tooltip="Lead time variability">Std Dev (œÉ)<span class="unit-label">days</span></span>
                        <span id="lbl_sigL" class="control-value">1</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="in_sigL" min="0" max="3" value="1">
                    </div>
                </div>

            </div>

            <div class="card">
                
                <div class="warehouse-container">
                    <div class="warehouse-visual">
                        <div class="warehouse-grid"></div>
                        <div id="stock-level" class="stock-level" style="height: 50%;"></div>
                        <div id="stock-text" class="stock-text">0</div>
                        <div id="rop-line" class="rop-line" style="bottom: 30%;"></div>
                        <div id="optimal-rop-line" class="optimal-rop-line" style="bottom: 33%;"></div>
                        <div id="truck" class="truck-icon">üöö</div>
                    </div>
                </div>

                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <div class="kpi-icon blue">üìà</div>
                            <div>
                                <div class="kpi-label">Avg Stock</div>
                                <div id="kpi_stock" class="kpi-value">0</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <div class="kpi-icon green">üí∞</div>
                            <div>
                                <div class="kpi-label">Total Cost</div>
                                <div id="kpi_total" class="kpi-value">$0</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <div class="kpi-icon orange">‚úÖ</div>
                            <div>
                                <div class="kpi-label">Service Level</div>
                                <div id="kpi_sl" class="kpi-value">100%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="kpi-card">
                        <div class="kpi-header">
                            <div class="kpi-icon purple">üì¶</div>
                            <div>
                                <div class="kpi-label">Orders in Transit</div>
                                <div id="kpi_orders" class="kpi-value">0</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="section-header">
                        <div class="section-icon">
                            üìà
                        </div>
                        <h3 class="section-title">Inventory Level Timeline</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="simCanvas"></canvas>
                    </div>
                </div>

                <div class="cost-breakdown">
                    <div class="cost-header">Cost Distribution</div>
                    <div class="cost-bar-container">
                        <div id="bar_hold" class="cost-bar" style="background: linear-gradient(135deg, #00d4ff, #0099cc); width: 33%;"></div>
                        <div id="bar_ord" class="cost-bar" style="background: linear-gradient(135deg, #00ffc8, #00cc9f); width: 33%;"></div>
                        <div id="bar_lost" class="cost-bar" style="background: linear-gradient(135deg, #ff4d4d, #cc0000); width: 34%;"></div>
                    </div>
                    <div class="cost-legend">
                        <div class="cost-legend-item">
                            <div class="legend-dot" style="background: linear-gradient(135deg, #00d4ff, #0099cc);"></div>
                            <span>Holding Cost</span>
                        </div>
                        <div class="cost-legend-item">
                            <div class="legend-dot" style="background: linear-gradient(135deg, #00ffc8, #00cc9f);"></div>
                            <span>Order Cost</span>
                        </div>
                        <div class="cost-legend-item">
                            <div class="legend-dot" style="background: linear-gradient(135deg, #ff4d4d, #cc0000);"></div>
                            <span>Shortage Cost</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="container">
            <div class="info-section">
                <div class="info-header">
                    <div class="info-icon">
                        üìö
                    </div>
                    <span>Understanding the Simulation</span>
                </div>

                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-card-title">
                            üìä <span>Demand Dynamics</span>
                        </div>
                        <div class="info-card-content">
                            Daily demand follows a <span class="highlight">normal distribution</span> with mean (Œº) and standard deviation (œÉ). This stochastic nature represents real-world uncertainty in customer orders. Higher œÉ means more volatile demand patterns.
                            <div class="formula">
                                Daily Demand ~ N(Œº, œÉ¬≤)
                            </div>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">
                            üì¶ <span>Inventory Policy (Q,r)</span>
                        </div>
                        <div class="info-card-content">
                            The system uses a <span class="highlight">continuous review policy</span>: when inventory position drops to or below the reorder point (s), a fixed quantity (Q) is ordered. This balances holding costs with stockout risks.
                            <div class="formula">
                                If (Inventory + Pipeline) ‚â§ s ‚Üí Order Q units
                            </div>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">
                            üöö <span>Lead Time Variability</span>
                        </div>
                        <div class="info-card-content">
                            Delivery times are <span class="highlight">stochastic</span>, following a normal distribution. This uncertainty affects safety stock requirements and increases the complexity of inventory management.
                            <div class="formula">
                                Lead Time ~ N(Œº_L, œÉ_L¬≤) days
                            </div>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">
                            üí∞ <span>Cost Structure</span>
                        </div>
                        <div class="info-card-content">
                            Three cost components drive decision-making:
                            ‚Ä¢ <span class="highlight">Holding Cost</span>: $2/unit/day for storage
                            ‚Ä¢ <span class="highlight">Order Cost</span>: $100 fixed per order
                            ‚Ä¢ <span class="highlight">Shortage Cost</span>: $10/unit for lost sales
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">
                            ü§ñ <span>AI Optimization Engine</span>
                        </div>
                        <div class="info-card-content">
                            The <span class="ai-highlight">Reinforcement Learning agent</span> uses Q-Learning to discover optimal parameters. It combines EOQ calculations with safety stock analysis, then adjusts based on real-time performance metrics.
                            <div class="formula">
                                Q* = ‚àö(2DK/h) √ó RL_adjustment
                            </div>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="info-card-title">
                            üìà <span>Performance Metrics</span>
                        </div>
                        <div class="info-card-content">
                            ‚Ä¢ <span class="highlight">Service Level</span>: % of demand fulfilled immediately
                            ‚Ä¢ <span class="highlight">Average Stock</span>: Mean inventory level over time
                            ‚Ä¢ <span class="highlight">Total Cost</span>: Sum of all cost components
                            ‚Ä¢ <span class="highlight">Pipeline Orders</span>: In-transit inventory
                        </div>
                    </div>
                </div>

                <div style="margin-top: 24px; padding: 20px; background: rgba(0, 212, 255, 0.05); border-radius: 12px; border: 1px solid rgba(0, 212, 255, 0.2);">
                    <div style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.7;">
                        <strong style="color: var(--accent);">üìå Simulation Objective:</strong> Find the optimal balance between inventory investment and customer service. The <span class="ai-highlight">AI agent learns</span> from cost patterns and continuously improves its recommendations. Watch how the <span class="highlight">green optimal lines</span> adapt as the simulation progresses, demonstrating real-time machine learning in action.
                    </div>
                </div>

                <div id="ql-section" class="ql-explanation-section" style="margin-top: 24px; padding: 24px; background: linear-gradient(135deg, rgba(38, 255, 137, 0.03), rgba(38, 255, 137, 0.01)); border-radius: 12px; border: 1px solid rgba(38, 255, 137, 0.2); scroll-margin-top: 20px; position: relative;">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px;">
                        <div style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--accent-ai), var(--accent-secondary)); border-radius: 10px; font-size: 18px;">
                            üß†
                        </div>
                        <h3 style="font-size: 1.1rem; font-weight: 700; color: var(--accent-ai); margin: 0;">Reinforcement Learning: Q-Learning Algorithm</h3>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div>
                            <h4 style="color: var(--accent-ai); font-size: 0.95rem; margin-bottom: 12px;">üéØ How Q-Learning Works</h4>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                                Q-Learning is a <span class="ai-highlight">model-free reinforcement learning</span> algorithm that learns optimal actions through trial and error:
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><strong style="color: var(--accent-secondary);">State (S):</strong> Current inventory level & demand pattern</li>
                                    <li><strong style="color: var(--accent-secondary);">Action (A):</strong> Set Q (order quantity) and s (reorder point)</li>
                                    <li><strong style="color: var(--accent-secondary);">Reward (R):</strong> Negative total cost (minimize costs)</li>
                                    <li><strong style="color: var(--accent-secondary);">Q-Table:</strong> Stores value of each state-action pair</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: var(--accent-ai); font-size: 0.95rem; margin-bottom: 12px;">üìä Learning Process</h4>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                                The AI agent continuously improves through these steps:
                                <div class="formula" style="background: rgba(38, 255, 137, 0.1); border-left-color: var(--accent-ai);">
                                    Q(s,a) ‚Üê Q(s,a) + Œ±[R + Œ≥¬∑max Q(s',a') - Q(s,a)]
                                </div>
                                Where:
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><strong>Œ±:</strong> Learning rate (how fast to adapt)</li>
                                    <li><strong>Œ≥:</strong> Discount factor (future reward importance)</li>
                                    <li><strong>max Q(s',a'):</strong> Best future action value</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: var(--accent-ai); font-size: 0.95rem; margin-bottom: 12px;">üöÄ Exploration vs Exploitation</h4>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                                The agent balances between:
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li><strong style="color: var(--accent-secondary);">Exploration:</strong> Trying new Q,s combinations to discover better policies</li>
                                    <li><strong style="color: var(--accent-secondary);">Exploitation:</strong> Using the best-known parameters for optimal performance</li>
                                </ul>
                                This <span class="ai-highlight">Œµ-greedy strategy</span> ensures continuous learning and adaptation to changing conditions.
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: var(--accent-ai); font-size: 0.95rem; margin-bottom: 12px;">üí° Real-time Adaptation</h4>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                                Our simulator demonstrates RL in action:
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li>Monitors cost patterns every 50 days</li>
                                    <li>Adjusts recommendations based on service level</li>
                                    <li>Learns from stockout incidents</li>
                                    <li>Optimizes for <span class="ai-highlight">total cost minimization</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 16px; background: rgba(0, 0, 0, 0.2); border-radius: 8px; border: 1px solid rgba(38, 255, 137, 0.1);">
                        <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                            <strong style="color: var(--accent-ai);">üéÆ Interactive Learning:</strong> 
                            As you adjust parameters, the Q-Learning agent observes the outcomes and refines its recommendations. The <span class="ai-highlight">green AI indicators</span> show where the algorithm believes optimal values lie based on accumulated experience. Click <strong>"Apply AI"</strong> to instantly apply the learned optimal parameters and observe the performance improvement!
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Scroll to Q-Learning section with highlight animation
        function scrollToQLearning() {
            const element = document.getElementById('ql-section');
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                // Add highlight animation
                element.classList.add('highlight');
                setTimeout(() => {
                    element.classList.remove('highlight');
                }, 1500);
            }
        }

        // State
        let state = {
            day: 0,
            inventory: 0,
            pipeline: [],
            history: [],
            totalHoldingCost: 0,
            totalOrderCost: 0,
            totalShortageCost: 0,
            totalDemand: 0,
            fulfilledDemand: 0,
            sumInventory: 0
        };

        // Fixed Cost Parameters
        const costs = {
            cH: 2,    // Holding cost per unit per day
            cO: 100,  // Fixed ordering cost
            cS: 10    // Shortage cost per unit
        };

        const maxCapacity = 500;

        // AI Optimization Parameters (simulated RL results)
        let aiOptimal = {
            Q: 245,
            s: 165
        };

        // DOM References
        const inputs = {
            speed: document.getElementById('in_speed'),
            muD: document.getElementById('in_muD'),
            sigD: document.getElementById('in_sigD'),
            Q: document.getElementById('in_Q'),
            s: document.getElementById('in_s'),
            muL: document.getElementById('in_muL'),
            sigL: document.getElementById('in_sigL')
        };

        const displays = {
            speed: document.getElementById('lbl_speed'),
            muD: document.getElementById('lbl_muD'),
            sigD: document.getElementById('lbl_sigD'),
            Q: document.getElementById('lbl_Q'),
            s: document.getElementById('lbl_s'),
            muL: document.getElementById('lbl_muL'),
            sigL: document.getElementById('lbl_sigL'),
            
            visualStock: document.getElementById('stock-level'),
            visualText: document.getElementById('stock-text'),
            visualRop: document.getElementById('rop-line'),
            optimalRop: document.getElementById('optimal-rop-line'),
            truck: document.getElementById('truck'),
            
            kpiStock: document.getElementById('kpi_stock'),
            kpiTotal: document.getElementById('kpi_total'),
            kpiSL: document.getElementById('kpi_sl'),
            kpiOrders: document.getElementById('kpi_orders'),
            
            barHold: document.getElementById('bar_hold'),
            barOrd: document.getElementById('bar_ord'),
            barLost: document.getElementById('bar_lost'),
            
            optimalQ: document.getElementById('optimal_Q'),
            optimalS: document.getElementById('optimal_s'),
            currentQDisplay: document.getElementById('current_Q_display'),
            currentSDisplay: document.getElementById('current_s_display'),
            diffQ: document.getElementById('diff_Q'),
            diffS: document.getElementById('diff_s'),
            
            optimalQIndicator: document.getElementById('optimal_Q_indicator'),
            optimalSIndicator: document.getElementById('optimal_s_indicator')
        };

        // Calculate optimal parameters using simplified EOQ and safety stock formulas
        function calculateOptimalParameters() {
            const muD = parseInt(inputs.muD.value);
            const sigD = parseInt(inputs.sigD.value);
            const muL = parseInt(inputs.muL.value);
            const sigL = parseFloat(inputs.sigL.value);
            
            // EOQ Formula: sqrt(2 * D * K / h)
            // where D = annual demand, K = order cost, h = holding cost
            const annualDemand = muD * 365;
            const optimalQ = Math.round(Math.sqrt((2 * annualDemand * costs.cO) / (costs.cH * 365)));
            
            // Safety Stock = z * sqrt(Lead Time) * œÉ_demand
            // For 95% service level, z = 1.65
            const z = 1.65;
            const safetyStock = Math.round(z * Math.sqrt(muL) * sigD);
            
            // Reorder Point = Lead Time Demand + Safety Stock
            const leadTimeDemand = muD * muL;
            const optimalS = Math.round(leadTimeDemand + safetyStock);
            
            // Add some RL-style adjustment based on recent performance
            const serviceLevelAdjustment = state.totalDemand > 0 
                ? (state.fulfilledDemand / state.totalDemand) 
                : 1;
            
            // Simulate RL learning: adjust based on cost ratio
            const costRatio = state.totalShortageCost > 0 
                ? state.totalShortageCost / (state.totalHoldingCost + state.totalOrderCost + state.totalShortageCost)
                : 0;
            
            // Apply learned adjustments
            aiOptimal.Q = Math.min(500, Math.max(50, Math.round(optimalQ * (1 + costRatio * 0.2))));
            aiOptimal.s = Math.min(200, Math.max(10, Math.round(optimalS * (1 + (1 - serviceLevelAdjustment) * 0.3))));
            
            updateAIDisplay();
        }

        // Update AI Display
        function updateAIDisplay() {
            displays.optimalQ.innerText = aiOptimal.Q;
            displays.optimalS.innerText = aiOptimal.s;
            
            const currentQ = parseInt(inputs.Q.value);
            const currentS = parseInt(inputs.s.value);
            
            displays.currentQDisplay.innerText = currentQ;
            displays.currentSDisplay.innerText = currentS;
            
            // Update differences
            const diffQ = aiOptimal.Q - currentQ;
            const diffS = aiOptimal.s - currentS;
            
            displays.diffQ.innerText = (diffQ >= 0 ? '+' : '') + diffQ;
            displays.diffQ.className = diffQ > 0 ? 'ai-metric-diff positive' : 'ai-metric-diff negative';
            
            displays.diffS.innerText = (diffS >= 0 ? '+' : '') + diffS;
            displays.diffS.className = diffS > 0 ? 'ai-metric-diff positive' : 'ai-metric-diff negative';
            
            // Update indicator positions
            const qPercent = ((aiOptimal.Q - 50) / (500 - 50)) * 100;
            const sPercent = ((aiOptimal.s - 10) / (200 - 10)) * 100;
            
            displays.optimalQIndicator.style.left = qPercent + '%';
            displays.optimalSIndicator.style.left = sPercent + '%';
            
            // Update optimal ROP line in warehouse
            const optimalRopPercent = Math.min(100, (aiOptimal.s / maxCapacity) * 100);
            displays.optimalRop.style.bottom = optimalRopPercent + '%';
        }

        // Event Listeners
        Object.keys(inputs).forEach(key => {
            inputs[key].addEventListener('input', () => {
                displays[key].innerText = inputs[key].value;
                if (key === 'Q' || key === 's') {
                    calculateOptimalParameters();
                }
            });
        });

        // Apply AI Optimization
        document.getElementById('btn_optimize').addEventListener('click', () => {
            inputs.Q.value = aiOptimal.Q;
            inputs.s.value = aiOptimal.s;
            displays.Q.innerText = aiOptimal.Q;
            displays.s.innerText = aiOptimal.s;
            calculateOptimalParameters();
        });

        document.getElementById('btn_reset').addEventListener('click', resetSimulation);

        // Helper Functions
        function randomNormal(mean, stdDev) {
            let u1 = Math.random();
            let u2 = Math.random();
            let z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
            return mean + z0 * stdDev;
        }

        // Simulation Logic
        function updateSimulation() {
            const params = {
                speedVal: parseInt(inputs.speed.value),
                muD: parseInt(inputs.muD.value),
                sigD: parseInt(inputs.sigD.value),
                Q: parseInt(inputs.Q.value),
                s: parseInt(inputs.s.value),
                muL: parseInt(inputs.muL.value),
                sigL: parseFloat(inputs.sigL.value),
                cH: costs.cH,
                cO: costs.cO,
                cS: costs.cS
            };

            // Update speed label
            if(params.speedVal < 20) displays.speed.innerText = "Slow";
            else if(params.speedVal > 80) displays.speed.innerText = "Max Speed";
            else displays.speed.innerText = "Normal";

            // Advance Day
            state.day++;

            // Receive Orders
            let arrivedQty = 0;
            state.pipeline = state.pipeline.filter(order => {
                if (order.arrivalDay <= state.day) {
                    arrivedQty += order.amount;
                    return false;
                }
                return true;
            });
            
            if(arrivedQty > 0) {
                state.inventory += arrivedQty;
                // Truck Animation
                let animDuration = Math.max(0.1, 0.6 - (params.speedVal/200));
                
                displays.truck.style.transition = 'none';
                displays.truck.style.right = '-60px';
                setTimeout(() => {
                    displays.truck.style.transition = `right ${animDuration}s cubic-bezier(0.4, 0, 0.2, 1)`;
                    displays.truck.style.right = '50%';
                    setTimeout(() => {
                         displays.truck.style.transition = `right ${animDuration}s cubic-bezier(0.4, 0, 0.2, 1)`;
                         displays.truck.style.right = '120%';
                    }, animDuration * 1200);
                }, 50);
            }

            // Generate Demand
            let dailyDemand = Math.round(randomNormal(params.muD, params.sigD));
            if(dailyDemand < 0) dailyDemand = 0;
            state.totalDemand += dailyDemand;

            // Fulfill Demand
            if (state.inventory >= dailyDemand) {
                state.inventory -= dailyDemand;
                state.fulfilledDemand += dailyDemand;
            } else {
                let sold = state.inventory;
                let lost = dailyDemand - state.inventory;
                state.fulfilledDemand += sold;
                state.inventory = 0;
                state.totalShortageCost += (lost * params.cS);
            }

            // Calculate Costs
            state.totalHoldingCost += (state.inventory * params.cH);
            state.sumInventory += state.inventory;

            // Check Reorder Policy
            let inventoryPosition = state.inventory + state.pipeline.reduce((acc, o) => acc + o.amount, 0);
            
            if (inventoryPosition <= params.s) {
                let leadTime = Math.round(randomNormal(params.muL, params.sigL));
                if(leadTime < 1) leadTime = 1;
                
                state.pipeline.push({
                    arrivalDay: state.day + leadTime,
                    amount: params.Q
                });
                state.totalOrderCost += params.cO;
            }

            // Update History
            state.history.push(state.inventory);
            if (state.history.length > 100) state.history.shift();

            // Periodically recalculate optimal parameters (simulate learning)
            if (state.day % 50 === 0) {
                calculateOptimalParameters();
            }

            updateVisuals();
        }

        function updateVisuals() {
            const params = {
                s: parseInt(inputs.s.value),
                Q: parseInt(inputs.Q.value)
            };

            // KPIs
            let avgStock = state.day > 0 ? Math.round(state.sumInventory / state.day) : 0;
            let totalCost = Math.round(state.totalHoldingCost + state.totalOrderCost + state.totalShortageCost);
            let serviceLevel = state.totalDemand > 0 ? ((state.fulfilledDemand / state.totalDemand) * 100).toFixed(1) : 100;

            displays.kpiStock.innerText = avgStock.toLocaleString();
            displays.kpiTotal.innerText = "$" + totalCost.toLocaleString();
            displays.kpiSL.innerText = serviceLevel + "%";
            displays.kpiOrders.innerText = state.pipeline.length;

            // Warehouse Visual
            let fillPercent = Math.min(100, (state.inventory / maxCapacity) * 100);
            let ropPercent = Math.min(100, (params.s / maxCapacity) * 100);
            
            displays.visualStock.style.height = fillPercent + "%";
            displays.visualText.innerText = state.inventory;
            displays.visualRop.style.bottom = ropPercent + "%";

            // Color coding
            displays.visualStock.className = 'stock-level';
            if (state.inventory == 0) displays.visualStock.classList.add('critical');
            else if (state.inventory <= params.s) displays.visualStock.classList.add('low');

            // Cost Breakdown
            let tc = state.totalHoldingCost + state.totalOrderCost + state.totalShortageCost;
            if (tc > 0) {
                let pH = (state.totalHoldingCost / tc) * 100;
                let pO = (state.totalOrderCost / tc) * 100;
                let pS = (state.totalShortageCost / tc) * 100;
                
                displays.barHold.style.width = pH + "%";
                displays.barOrd.style.width = pO + "%";
                displays.barLost.style.width = pS + "%";
                
                displays.barHold.innerText = pH > 5 ? Math.round(pH) + "%" : "";
                displays.barOrd.innerText = pO > 5 ? Math.round(pO) + "%" : "";
                displays.barLost.innerText = pS > 5 ? Math.round(pS) + "%" : "";
            }

            drawChart();
        }

        // Chart Drawing
        const canvas = document.getElementById('simCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function drawChart() {
            const params = {
                s: parseInt(inputs.s.value),
                Q: parseInt(inputs.Q.value)
            };

            let w = canvas.width;
            let h = canvas.height;
            
            ctx.clearRect(0, 0, w, h);

            // Add gradient background
            let gradient = ctx.createLinearGradient(0, 0, 0, h);
            gradient.addColorStop(0, 'rgba(0, 212, 255, 0.05)');
            gradient.addColorStop(1, 'transparent');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, w, h);

            // Grid lines
            ctx.strokeStyle = 'rgba(100, 116, 139, 0.1)';
            ctx.lineWidth = 1;
            for(let i = 0; i <= 10; i++) {
                let y = (h / 10) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(w, y);
                ctx.stroke();
            }

            // Scale
            let maxVal = Math.max(params.s * 1.5, params.Q + params.s, aiOptimal.s * 1.5, ...state.history);
            maxVal = maxVal * 1.1;

            function getY(val) {
                return h - ((val / maxVal) * h * 0.9) - h * 0.05;
            }

            // Current ROP Line
            let ropY = getY(params.s);
            ctx.beginPath();
            ctx.strokeStyle = '#ffae00';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 5]);
            ctx.moveTo(0, ropY);
            ctx.lineTo(w, ropY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Optimal ROP Line
            let optimalRopY = getY(aiOptimal.s);
            ctx.beginPath();
            ctx.strokeStyle = '#26ff89';
            ctx.lineWidth = 2;
            ctx.shadowColor = "#26ff89";
            ctx.shadowBlur = 5;
            ctx.moveTo(0, optimalRopY);
            ctx.lineTo(w, optimalRopY);
            ctx.stroke();
            ctx.shadowBlur = 0;

            // Inventory Line with gradient fill
            if (state.history.length > 1) {
                let step = w / (state.history.length - 1);
                
                // Fill area
                ctx.beginPath();
                let fillGradient = ctx.createLinearGradient(0, 0, 0, h);
                fillGradient.addColorStop(0, 'rgba(0, 212, 255, 0.3)');
                fillGradient.addColorStop(1, 'rgba(0, 212, 255, 0)');
                ctx.fillStyle = fillGradient;
                
                ctx.moveTo(0, h);
                ctx.lineTo(0, getY(state.history[0]));
                for (let i = 1; i < state.history.length; i++) {
                    ctx.lineTo(i * step, getY(state.history[i]));
                }
                ctx.lineTo(w, h);
                ctx.closePath();
                ctx.fill();
                
                // Line
                ctx.beginPath();
                ctx.strokeStyle = '#00d4ff';
                ctx.lineWidth = 3;
                ctx.shadowColor = "#00d4ff";
                ctx.shadowBlur = 10;
                ctx.lineJoin = "round";
                ctx.lineCap = "round";
                
                ctx.moveTo(0, getY(state.history[0]));
                for (let i = 1; i < state.history.length; i++) {
                    ctx.lineTo(i * step, getY(state.history[i]));
                }
                ctx.stroke();
                ctx.shadowBlur = 0;
            }
        }

        function resetSimulation() {
            state.day = 0;
            state.inventory = parseInt(inputs.Q.value);
            state.pipeline = [];
            state.history = [];
            state.totalHoldingCost = 0;
            state.totalOrderCost = 0;
            state.totalShortageCost = 0;
            state.totalDemand = 0;
            state.fulfilledDemand = 0;
            state.sumInventory = 0;
            calculateOptimalParameters();
            updateVisuals();
        }

        // Animation Loop
        let lastTime = 0;
        function loop(timestamp) {
            let currentSpeed = parseInt(inputs.speed.value);
            let delay = 505 - (currentSpeed * 5);
            
            if (timestamp - lastTime > delay) { 
                updateSimulation();
                lastTime = timestamp;
            }
            requestAnimationFrame(loop);
        }

        // Initialize
        resetSimulation();
        requestAnimationFrame(loop);
    </script>

</body>

</html>
